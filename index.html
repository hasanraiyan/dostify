<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Dostify - Your Friendly AI Companion for Every Student's Journey. Get personalized support for academic pressure, mental health, career guidance, and more.">
    <title>Dostify - Your AI Student Companion</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="icon" href="icon-removebg-preview.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="js/config.js" type="module"></script>
    <script src="js/chat.js" type="module"></script>
    <script src="js/main.js" type="module"></script>
    <script src="js/sample-prompts.js"></script> <!-- Ensure this file exists or remove if not used -->
    <script src="https://cdn.jsdelivr.net/npm/emoji-picker-element@^1/index.js" type="module"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        poppins: ['Poppins', 'sans-serif'],
                    },
                    colors: {
                        primary: '#4A90E2', // Main Blue
                        secondary: '#34495E', // Dark Blue-Gray
                        accent: '#2ECC71', // Green
                        light: '#F8F9FA', // Very Light Gray
                        'page-bg': '#FFFFFF', // White
                        'section-bg-subtle': '#F9FAFB', // Slightly off-white
                        dark: '#2c3e50' // Darker Blue-Gray
                    },
                    animation: {
                        'fade-in-up': 'fadeInUp 0.7s ease-out forwards',
                        'fade-in': 'fadeIn 0.7s ease-out forwards',
                        'slide-in-right': 'slideInRight 0.4s ease-out forwards',
                        'slide-in-left': 'slideInLeft 0.4s ease-out forwards',
                        'pulse-subtle': 'pulseSubtle 2.5s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'slide-in-notification': 'slideInNotification 0.4s ease-out forwards',
                        'pulse-alert': 'pulseAlert 1.8s infinite ease-in-out',
                        'bounce-subtle': 'bounceSubtle 1s infinite',
                    },
                    keyframes: {
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(30px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideInRight: {
                            from: { transform: 'translateX(30px)', opacity: '0' },
                            to: { transform: 'translateX(0)', opacity: '1' },
                        },
                        slideInLeft: {
                            from: { transform: 'translateX(-30px)', opacity: '0' },
                            to: { transform: 'translateX(0)', opacity: '1' },
                        },
                        pulseSubtle: {
                            '0%, 100%': { opacity: '1' },
                            '50%': { opacity: '.7' },
                        },
                        slideInNotification: {
                            from: { transform: 'translateY(25px)', opacity: '0' },
                            to: { transform: 'translateY(0)', opacity: '1' },
                        },
                        pulseAlert: {
                            '0%': { transform: 'scale(1)', boxShadow: '0 0 0 0 rgba(46, 204, 113, 0.5)' },
                            '70%': { transform: 'scale(1.05)', boxShadow: '0 0 0 12px rgba(46, 204, 113, 0)' },
                            '100%': { transform: 'scale(1)', boxShadow: '0 0 0 0 rgba(46, 204, 113, 0)' },
                        },
                        bounceSubtle: {
                            '0%, 100%': { transform: 'translateY(-5%)', animationTimingFunction: 'cubic-bezier(0.8,0,1,1)' },
                            '50%': { transform: 'none', animationTimingFunction: 'cubic-bezier(0,0,0.2,1)' },
                        }
                    },
                    boxShadow: {
                        'subtle': '0 4px 12px rgba(0, 0, 0, 0.05)',
                        'card': '0 6px 16px rgba(0, 0, 0, 0.07)',
                        'card-hover': '0 12px 28px rgba(74, 144, 226, 0.12), 0 8px 12px rgba(74, 144, 226, 0.08)',
                        'glow-primary': '0 0 30px rgba(74, 144, 226, 0.35)',
                        'glow-accent': '0 0 25px rgba(46, 204, 113, 0.3)',
                        'nav-scroll': '0 4px 12px rgba(0, 0, 0, 0.06)',
                        'chat-bubble': '0 3px 8px rgba(0, 0, 0, 0.08)',
                        'chat-bubble-user': '0 3px 8px rgba(74, 144, 226, 0.2)',
                    }
                }
            }
        }
    </script>
    <style>
        /* Base Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(74, 144, 226, 0.25);
            border-radius: 10px;
            transition: background 0.3s ease;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(74, 144, 226, 0.45);
        }

        * {
            scrollbar-width: thin;
            scrollbar-color: rgba(74, 144, 226, 0.25) transparent;
        }

        /* Chat Messages Scrollbar Styling */
        #chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        #chat-messages::-webkit-scrollbar-track {
            background: transparent;
            margin: 4px 0;
        }

        #chat-messages::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.15);
            border-radius: 6px;
        }

        #chat-messages::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.25);
        }

        #chat-messages {
            scrollbar-width: thin;
            scrollbar-color: rgba(0, 0, 0, 0.15) transparent;
        }

        .backdrop-blur-md {
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }

        .transition-smooth {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Chat Message Animations */
        .user-message {
            animation: slide-in-right 0.4s ease-out forwards;
        }

        .ai-message {
            animation: slide-in-left 0.4s ease-out forwards;
        }

        .memory-notification {
            animation: slide-in-notification 0.4s ease-out forwards;
        }

        /* Emoji Picker Positioning */
        emoji-picker {
            position: absolute;
            bottom: calc(100% + 12px);
            right: 0;
            z-index: 101;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            background-color: white;
            width: 350px;
            height: 400px;
        }

        /* Memory Modal Styling */
        #memory-modal {
            display: none;
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.65);
            backdrop-filter: blur(6px);
            -webkit-backdrop-filter: blur(6px);
        }

        .memory-modal-content {
            background-color: #ffffff;
            margin: 10% auto;
            padding: 2.5rem;
            border: none;
            border-radius: 1rem;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            animation: fadeInUp 0.5s ease-out forwards;
        }

        .memory-close-button {
            color: #9ca3af;
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 28px;
            font-weight: bold;
            transition: color 0.2s ease, transform 0.2s ease;
            padding: 0.5rem;
            line-height: 1;
        }

        .memory-close-button:hover,
        .memory-close-button:focus {
            color: #1f2937;
            text-decoration: none;
            cursor: pointer;
            transform: scale(1.1);
        }

        #memory-list {
            padding-left: 1.5rem;
            margin-top: 1.5rem;
        }

        #memory-list li {
            list-style-type: disc;
            margin-bottom: 0.85rem;
            color: #4b5563;
            line-height: 1.65;
            word-wrap: break-word;
        }

        /* Enhanced Focus Visible Styles (Consistent with Tailwind Config) */
        button:focus-visible,
        a:focus-visible {
            outline: 2px solid transparent;
            outline-offset: 2px;
            box-shadow: 0 0 0 3px theme('colors.primary/50');
        }

        input:focus-visible,
        textarea:focus-visible {
            outline: 2px solid transparent;
            outline-offset: 2px;
            box-shadow: 0 0 0 3px theme('colors.primary/50');
        }

        .btn-accent:focus-visible {
            box-shadow: 0 0 0 3px theme('colors.accent/50');
        }

        #chat-toggle:focus-visible {
            box-shadow: 0 0 0 4px theme('colors.white/50');
        }

        /* Specific focus for floating button */

        /* Line Clamping */
        .line-clamp-3 {
            overflow: hidden;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 3;
        }

        .line-clamp-2 {
            overflow: hidden;
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-line-clamp: 2;
        }

        /* Hero Background Pattern */
        .hero-bg-pattern::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: radial-gradient(circle at top left, rgba(255, 255, 255, 0.06) 0%, transparent 35%), radial-gradient(circle at bottom right, rgba(46, 204, 113, 0.06) 0%, transparent 45%);
            opacity: 0.7;
            z-index: 0;
        }

        .text-shadow {
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.25);
        }

        /* Chat Bubble Copy Button Visibility */
        .message-bubble:hover .copy-btn {
            opacity: 1;
            transform: scale(1);
        }

        .copy-btn {
            opacity: 0;
            transform: scale(0.8);
            transition: opacity 0.2s ease-out, transform 0.2s ease-out;
        }

        /* Subtle Background Gradient for sections */
        .section-gradient-top {
            background: linear-gradient(to bottom, theme('colors.page-bg'), theme('colors.section-bg-subtle'));
        }

        .section-gradient-bottom {
            background: linear-gradient(to top, theme('colors.page-bg'), theme('colors.section-bg-subtle'));
        }

        /* Chat Input Area Enhancements */
        #chat-input-wrapper:focus-within {
            box-shadow: 0 0 0 2px theme('colors.primary/40');
            border-color: theme('colors.primary/80');
        }

        #chat-input::-webkit-scrollbar {
            display: none;
        }

        /* Hide scrollbar on textarea */
        #chat-input {
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        /* Hide scrollbar FF/IE */
    </style>
</head>

<body class="font-poppins bg-page-bg text-secondary antialiased">
    <nav class="fixed top-0 w-full z-50 bg-white/90 backdrop-blur-md transition-all duration-300 ease-in-out border-b border-transparent"
        id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <a href="#" class="flex items-center flex-shrink-0 group" aria-label="Dostify Home">
                    <img src="/icon-removebg-preview.png" alt="Dostify Icon"
                        class="w-8 h-8 mr-2 transition-transform duration-300 ease-out group-hover:rotate-[10deg] group-hover:scale-110">
                    <div
                        class="text-2xl font-bold text-primary transition-colors duration-300 group-hover:text-blue-600">
                        Dostify</div>
                </a>
                <div class="hidden md:flex items-center space-x-6 lg:space-x-8">
                    <a href="#features"
                        class="text-gray-600 hover:text-primary transition-smooth text-sm font-medium">Features</a>
                    <a href="#how-it-works"
                        class="text-gray-600 hover:text-primary transition-smooth text-sm font-medium">How it Works</a>
                    <a href="#benefits"
                        class="text-gray-600 hover:text-primary transition-smooth text-sm font-medium">Benefits</a>
                    <a href="#testimonials"
                        class="text-gray-600 hover:text-primary transition-smooth text-sm font-medium">Testimonials</a>
                    <a href="#download-app"
                        class="border border-secondary/60 hover:border-secondary text-secondary hover:bg-secondary/5 px-5 py-2 rounded-lg transition-smooth text-sm font-medium flex items-center gap-2 focus-visible:ring-secondary/50"
                        aria-label="View Dostify App">
                        <i class="fas fa-eye text-xs"></i>
                        <span>View App</span>
                    </a>
                    <a href="#sample-prompts"
                        class="get-started-btn btn-accent bg-accent hover:bg-accent/90 text-white px-5 py-2 rounded-lg transition-smooth transform hover:-translate-y-0.5 text-sm font-medium shadow-sm hover:shadow-md focus-visible:ring-accent/50"
                        aria-label="Get Started with Dostify Prompts">
                        Get Started
                    </a>
                </div>
                <button
                    class="md:hidden text-gray-600 hover:text-primary focus:outline-none p-2 rounded-md focus-visible:bg-gray-100 focus-visible:ring-2 focus-visible:ring-primary/50"
                    id="mobile-menu-button" aria-label="Open Mobile Menu" aria-expanded="false">
                    <i class="fas fa-bars text-2xl"></i>
                </button>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div class="hidden md:hidden absolute top-full left-0 w-full bg-white shadow-lg border-t border-gray-100"
            id="mobile-menu">
            <div class="px-4 py-4 space-y-3">
                <a href="#features"
                    class="block text-gray-700 hover:text-primary px-3 py-2 rounded-md transition-smooth font-medium">Features</a>
                <a href="#how-it-works"
                    class="block text-gray-700 hover:text-primary px-3 py-2 rounded-md transition-smooth font-medium">How
                    it Works</a>
                <a href="#benefits"
                    class="block text-gray-700 hover:text-primary px-3 py-2 rounded-md transition-smooth font-medium">Benefits</a>
                <a href="#testimonials"
                    class="block text-gray-700 hover:text-primary px-3 py-2 rounded-md transition-smooth font-medium">Testimonials</a>
                <a href="#download-app"
                    class="block w-full text-center border border-secondary/70 text-secondary hover:bg-secondary/5 px-6 py-2.5 rounded-lg transition-smooth my-2 flex items-center justify-center gap-2 font-medium focus-visible:ring-secondary/50"
                    aria-label="View Dostify App">
                    <i class="fas fa-eye"></i> <span>View App</span>
                </a>
                <a href="#sample-prompts"
                    class="get-started-btn btn-accent block w-full text-center bg-accent hover:bg-accent/90 text-white px-6 py-2.5 rounded-lg transition-smooth font-medium focus-visible:ring-accent/50"
                    aria-label="Get Started with Dostify Prompts">
                    Get Started
                </a>
            </div>
        </div>
    </nav>

    <header
        class="min-h-screen bg-gradient-to-br from-primary via-blue-600 to-secondary pt-20 relative overflow-hidden hero-bg-pattern">
        <div
            class="absolute top-0 left-0 w-72 h-72 bg-white/5 rounded-full filter blur-3xl opacity-40 -translate-x-20 -translate-y-20">
        </div>
        <div
            class="absolute bottom-0 right-0 w-96 h-96 bg-accent/10 rounded-full filter blur-3xl opacity-30 translate-x-24 translate-y-24">
        </div>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 min-h-[calc(100vh-5rem)] flex items-center relative z-10">
            <div class="grid md:grid-cols-2 gap-12 items-center w-full py-16 md:py-20">
                <div class="text-white space-y-6 animate-fade-in-up" style="animation-delay: 0.1s;">
                    <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold leading-tight tracking-tight text-shadow">
                        Your Friendly AI Companion for Every Student's Journey
                    </h1>
                    <p class="text-lg md:text-xl opacity-90 max-w-xl">
                        Navigate academic pressure, mental health challenges, and career uncertainty with Dostify, your
                        personal AI guide.
                    </p>
                    <div class="pt-4">
                        <button
                            class="get-started-btn talk-to-dostify btn-accent bg-accent hover:brightness-110 text-white px-8 py-3.5 rounded-lg text-lg font-medium transition-smooth transform hover:scale-[1.03] hover:-translate-y-1 shadow-lg hover:shadow-xl flex items-center gap-3 group focus-visible:ring-accent/50"
                            aria-label="Talk to Dostify Now">
                            <span>Talk to Dostify Now</span>
                            <i
                                class="fas fa-arrow-right transform group-hover:translate-x-1.5 transition-transform duration-300 ease-out"></i>
                        </button>
                    </div>
                </div>
                <div class="hidden md:block animate-fade-in relative group" style="animation-delay: 0.3s;">
                    <div
                        class="absolute -inset-3 bg-gradient-to-r from-white/10 to-transparent rounded-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 transform group-hover:rotate-[-1.5deg] group-hover:scale-[1.02]">
                    </div>
                    <div
                        class="relative overflow-hidden rounded-xl shadow-xl group-hover:shadow-2xl transition-shadow duration-500">
                        <img src="/image.png" alt="Dostify AI Companion Illustration"
                            class="w-full transition-transform duration-500 group-hover:scale-[1.03] rounded-xl">
                    </div>
                </div>
            </div>
        </div>
    </header>

    <section id="features" class="py-24 bg-section-bg-subtle section-gradient-top">
    </section>

    <section id="download-app"
        class="py-28 lg:py-40 bg-gradient-to-br from-primary via-blue-600 to-secondary relative overflow-hidden">
        <!-- Enhanced Background Elements (No Blur) -->
        <div
            class="absolute top-0 left-[-10%] w-[500px] h-[500px] bg-white/5 rounded-full opacity-20 animate-pulse-subtle animation-delay-300 z-0">
        </div>
        <div
            class="absolute bottom-0 right-[-10%] w-[600px] h-[600px] bg-accent/5 rounded-full opacity-15 animate-pulse-subtle animation-delay-1200 z-0">
        </div>
        <div
            class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-white/10 rounded-full opacity-5 animate-pulse-subtle animation-delay-2000 z-0">
        </div>

        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="grid md:grid-cols-2 gap-16 lg:gap-28 items-center">
                <!-- Left Column: Text Content -->
                <div class="text-white space-y-8 animate-fade-in-up" style="animation-delay: 0.1s;">
                    <div>
                        <span
                            class="inline-block px-3 py-1 bg-white/10 rounded-full text-sm font-medium text-accent mb-4 backdrop-blur-sm border border-white/20">Mobile
                            Experience</span>
                        <h2 class="text-4xl lg:text-5xl font-bold leading-tight tracking-tight text-shadow mb-4">Get
                            Dostify On Your Mobile</h2>
                        <p class="text-lg lg:text-xl opacity-90 max-w-lg leading-relaxed">
                            Scan the QR code to view Dostify on your mobile browser and access instant support, track
                            progress, and stay motivated on the go.
                        </p>
                    </div>

                    <!-- Feature List (Keep or Remove as needed, I'm keeping it for now as it's good content) -->
                    <div class="space-y-5 pt-6 border-t border-white/10">
                        <h3 class="text-lg font-semibold opacity-80 mb-3">App Features (Mobile Browser):</h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">
                            <!-- Feature Item 1 -->
                            <div
                                class="flex items-start space-x-4 group p-3 rounded-xl hover:bg-white/5 transition-all duration-300">
                                <div
                                    class="w-10 h-10 flex-shrink-0 bg-white/10 rounded-xl flex items-center justify-center border border-white/20 ring-1 ring-white/10 group-hover:bg-accent/20 group-hover:border-accent/30 transition-all duration-300">
                                    <i class="fas fa-bolt text-accent text-sm"></i>
                                </div>
                                <div>
                                    <span class="text-base font-medium opacity-95 block mb-1">Instant Access</span>
                                    <span class="text-sm opacity-70">Chat with AI anytime, anywhere</span>
                                </div>
                            </div>
                            <!-- Feature Item 2 -->
                            <div
                                class="flex items-start space-x-4 group p-3 rounded-xl hover:bg-white/5 transition-all duration-300">
                                <div
                                    class="w-10 h-10 flex-shrink-0 bg-white/10 rounded-xl flex items-center justify-center border border-white/20 ring-1 ring-white/10 group-hover:bg-accent/20 group-hover:border-accent/30 transition-all duration-300">
                                    <i class="fas fa-pen-alt text-accent text-sm"></i>
                                </div>
                                <div>
                                    <span class="text-base font-medium opacity-95 block mb-1">Full Functionality</span>
                                    <span class="text-sm opacity-70">All features available on mobile browser</span>
                                </div>
                            </div>
                            <!-- Feature Item 3 -->
                            <div
                                class="flex items-start space-x-4 group p-3 rounded-xl hover:bg-white/5 transition-all duration-300">
                                <div
                                    class="w-10 h-10 flex-shrink-0 bg-white/10 rounded-xl flex items-center justify-center border border-white/20 ring-1 ring-white/10 group-hover:bg-accent/20 group-hover:border-accent/30 transition-all duration-300">
                                    <i class="fas fa-shield-alt text-accent text-sm"></i>
                                </div>
                                <div>
                                    <span class="text-base font-medium opacity-95 block mb-1">Secure & Private</span>
                                    <span class="text-sm opacity-70">Your chats are encrypted and private</span>
                                </div>
                            </div>
                            <!-- Feature Item 4 (Adjusted for mobile browser access) -->
                            <div class="flex items-start space-x-4 group p-3 rounded-xl opacity-90">
                                <div
                                    class="w-10 h-10 flex-shrink-0 bg-white/10 rounded-xl flex items-center justify-center border border-white/20 ring-1 ring-white/10 group-hover:bg-accent/20 group-hover:border-accent/30 transition-all duration-300">
                                    <i class="fas fa-globe text-accent text-sm"></i>
                                </div>
                                <div>
                                    <span class="text-base font-medium text-white block mb-1">Web Access</span>
                                    <span class="text-sm opacity-70">Access Dostify directly from your browser</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- QR Code and Instructions -->
                    <div class="flex flex-col items-center pt-8 border-t border-white/10">
                        <p class="text-lg text-white opacity-90 mb-4">Scan the QR code below with your phone camera to
                            view Dostify on mobile:</p>
                        <div class="bg-white p-4 rounded-lg shadow-md">
                            <img src="images/qr.jpg" alt="QR Code for Dostify App" class="w-48 h-48 md:w-56 md:h-56"
                                style="max-width: 100%; height: auto;">
                        </div>
                        <p class="text-sm text-white/70 mt-4 text-center">Point your smartphone camera at the QR code.
                        </p>
                    </div>
                </div>

                <!-- Right Column: Phone with App Carousel (Keep or remove, I'm keeping for visual appeal) -->
                <div class="phone-showcase relative h-[800px] w-full flex justify-center items-center hidden md:flex">
                    <!-- Hide on mobile, show on desktop -->
                    <!-- Phone Frame -->
                    <div class="phone-frame relative w-[350px] h-[800px] mx-auto">
                        <div
                            class="phone-device absolute inset-0 bg-gray-900 rounded-[36px] border-8 border-gray-800 shadow-2xl transition-transform duration-500 z-20">
                            <!-- Phone Notch -->
                            <div
                                class="absolute top-0 left-1/2 transform -translate-x-1/2 w-36 h-7 bg-black rounded-b-sm z-30 flex items-center justify-center">
                                <!-- Slightly larger notch -->
                                <div class="w-14 h-2.5 bg-gray-800 rounded-full"></div>
                            </div>

                            <!-- Phone Screen (Carousel Container) -->
                            <div
                                class="absolute top-7 left-0 right-0 bottom-0 bg-gray-100 overflow-hidden rounded-b-[36px] z-20">
                                <!-- Carousel Wrapper -->
                                <div class="carousel-wrapper relative h-full w-full">

                                    <!-- Screen 1 -->
                                    <div
                                        class="carousel-screen absolute inset-0 transition-opacity duration-700 ease-in-out opacity-100">
                                        <img src="./images/app-icon.png" alt="Dostify App Main Screen"
                                            class="w-full h-full object-cover">
                                    </div>

                                    <!-- Screen 2 -->
                                    <div
                                        class="carousel-screen absolute inset-0 transition-opacity duration-700 ease-in-out opacity-0">
                                        <img src="./images/app-icon-02.png" alt="Dostify App Feature Screen"
                                            class="w-full h-full object-cover">
                                    </div>

                                    <!-- Screen 3 -->
                                    <div
                                        class="carousel-screen absolute inset-0 transition-opacity duration-700 ease-in-out opacity-0">
                                        <img src="./images/app-icon-03.png" alt="Dostify App Feature Screen"
                                            class="w-full h-full object-cover">
                                    </div>

                                    <!-- Screen 4 -->

                                    <div
                                        class="carousel-screen absolute inset-0 transition-opacity duration-700 ease-in-out opacity-0">
                                        <img src="./images/app-icon-04.png" alt="Dostify App Feature Screen"
                                            class="w-full h-full object-cover">
                                    </div>

                                    <!-- Screen (Placeholder) -->
                                    <div
                                        class="carousel-screen absolute inset-0 transition-opacity duration-700 ease-in-out opacity-0 bg-gradient-to-br from-blue-500 to-indigo-600">
                                        <div
                                            class="flex flex-col items-center justify-center h-full text-white p-6 text-center">
                                            <i class="fas fa-chart-line text-5xl mb-6 opacity-80"></i>
                                            <h3 class="text-2xl font-bold mb-3">Track Your Progress</h3>
                                            <p class="text-sm opacity-90">Monitor your interactions and see your
                                                improvement over time.</p>
                                        </div>
                                    </div>


                                </div>
                            </div>

                            <!-- Phone Buttons (Side) - Adjusted Positions -->
                            <div class="absolute top-28 -right-[2px] h-20 w-1 bg-gray-700 rounded-l-md"></div>
                            <!-- Adjusted top/height -->
                            <div class="absolute top-56 -left-[2px] h-12 w-1 bg-gray-700 rounded-r-md"></div>
                            <!-- Adjusted top/height -->
                            <div class="absolute top-72 -left-[2px] h-12 w-1 bg-gray-700 rounded-r-md"></div>
                            <!-- Adjusted top/height -->
                        </div>

                        <!-- Floating Elements (Decorative) - Positions remain relative -->
                        <div
                            class="absolute top-1/4 -left-16 w-16 h-16 bg-accent/80 rounded-2xl opacity-30 animate-float-slow z-10">
                        </div>
                        <div
                            class="absolute bottom-1/3 -right-12 w-12 h-12 bg-primary/70 rounded-full opacity-20 animate-float z-10">
                        </div>

                        <!-- Reflection/Highlight -->
                        <div
                            class="absolute inset-0 bg-gradient-to-br from-white/5 to-transparent rounded-[48px] opacity-40 z-30 pointer-events-none">
                        </div> <!-- Adjusted border-radius -->
                    </div>

                    <!-- Shadow under phone -->
                    <div
                        class="absolute bottom-8 left-1/2 transform -translate-x-1/2 w-56 h-8 bg-black/30 rounded-full blur-xl z-0">
                    </div> <!-- Increased shadow width slightly -->
                </div>
            </div>
        </div>
    </section>

    <style>
        /* Additional animation keyframes */
        @keyframes float {
            0% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }

            100% {
                transform: translateY(0px);
            }
        }

        @keyframes float-slow {
            0% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-15px);
            }

            100% {
                transform: translateY(0px);
            }
        }

        @keyframes pulse-subtle {

            /* Using opacity directly on elements */
            0%,
            100% {
                opacity: inherit;
                /* Use element's base opacity */
            }

            50% {
                opacity: calc(var(--tw-bg-opacity, 1) * 1.5);
                /* Slightly increase opacity if needed, adjust multiplier */
            }

            /* Or just keep it simple if pulse isn't needed */
            /* 0%, 100% { transform: scale(1); }
         50% { transform: scale(1.03); } */
        }

        /* Applied animations */
        .animate-float {
            animation: float 6s ease-in-out infinite;
        }

        .animate-float-slow {
            animation: float-slow 8s ease-in-out infinite;
        }

        /* .animate-pulse-subtle {
        animation: pulse-subtle 8s ease-in-out infinite;
    } */
        /* Decided pulse might be distracting without blur, commented out, can re-enable if desired */

        .animation-delay-300 {
            animation-delay: 0.3s;
        }

        .animation-delay-1200 {
            animation-delay: 1.2s;
        }

        .animation-delay-2000 {
            animation-delay: 2s;
        }

        .text-shadow {
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* Ensure Font Awesome is loaded in your project, otherwise icons won't show */
        /* Example: <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" /> */
    </style>

    <!-- JavaScript for Carousel Functionality -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const carousel = document.querySelector('#download-app .carousel-wrapper');
            if (!carousel) return; // Exit if carousel element not found

            const screens = carousel.querySelectorAll('.carousel-screen');
            const dotsContainer = carousel.querySelector('.carousel-dots');
            if (!dotsContainer) return; // Exit if dots container not found

            const dots = dotsContainer.querySelectorAll('button');
            let currentIndex = 0;
            let intervalId = null;
            const autoRotateDelay = 5000; // ms

            function showScreen(index) {
                if (index < 0 || index >= screens.length) {
                    console.warn("Invalid slide index:", index);
                    return;
                }
                screens.forEach((screen, i) => {
                    screen.style.opacity = i === index ? '1' : '0';
                    screen.style.zIndex = i === index ? '10' : '1'; // Ensure active screen is on top
                });

                dots.forEach((dot, i) => {
                    dot.style.opacity = i === index ? '1' : '0.5';
                    if (i === index) {
                        dot.setAttribute('aria-current', 'true');
                    } else {
                        dot.removeAttribute('aria-current');
                    }
                });

                currentIndex = index;
            }

            function startAutoRotate() {
                // Clear existing interval before starting a new one
                if (intervalId) {
                    clearInterval(intervalId);
                }
                intervalId = setInterval(() => {
                    const nextIndex = (currentIndex + 1) % screens.length;
                    showScreen(nextIndex);
                }, autoRotateDelay);
            }

            function stopAutoRotate() {
                if (intervalId) {
                    clearInterval(intervalId);
                    intervalId = null;
                }
            }

            // Click handlers for dots
            dots.forEach((dot, i) => {
                dot.addEventListener('click', () => {
                    stopAutoRotate(); // Stop auto rotation on manual navigation
                    showScreen(i);
                    startAutoRotate(); // Restart auto rotation after manual click
                });
            });

            // Initial setup
            showScreen(0); // Show the first screen initially
            startAutoRotate(); // Start auto-rotation

            // Optional: Pause on hover over the carousel
            // carousel.addEventListener('mouseenter', stopAutoRotate);
            // carousel.addEventListener('mouseleave', startAutoRotate);
        });
    </script>

    <footer class="bg-gradient-to-b from-secondary to-dark text-gray-300 py-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-10 mb-12">
                <div class="col-span-2 lg:col-span-2">
                    <a href="#" class="flex items-center mb-4 group" aria-label="Dostify Home">
                        <img src="/icon-removebg-preview.png" alt="Dostify Icon"
                            class="w-7 h-7 mr-2 transition-transform group-hover:rotate-[15deg] duration-300 ease-out">
                        <span
                            class="text-2xl font-semibold text-white group-hover:text-primary transition-colors">Dostify</span>
                    </a>
                    <p class="text-gray-400 text-sm leading-relaxed pr-4">Your AI companion for academic success and
                        personal growth.</p>
                </div>
                <div class="col-span-1">
                    <h3 class="text-base font-semibold text-white mb-4 tracking-wide uppercase">Quick Links</h3>
                    <div class="space-y-3">
                        <a href="#features"
                            class="block text-gray-400 hover:text-white text-sm transition-smooth hover:translate-x-1">Features</a>
                        <a href="#how-it-works"
                            class="block text-gray-400 hover:text-white text-sm transition-smooth hover:translate-x-1">How
                            it Works</a>
                        <a href="#benefits"
                            class="block text-gray-400 hover:text-white text-sm transition-smooth hover:translate-x-1">Benefits</a>
                        <a href="#download-app"
                            class="block text-gray-400 hover:text-white text-sm transition-smooth hover:translate-x-1">View
                            App</a>
                    </div>
                </div>
                <div class="col-span-1">
                    <h3 class="text-base font-semibold text-white mb-4 tracking-wide uppercase">Support</h3>
                    <div class="space-y-3">
                        <a href="#"
                            class="block text-gray-400 hover:text-white text-sm transition-smooth hover:translate-x-1">FAQ</a>
                        <a href="#"
                            class="block text-gray-400 hover:text-white text-sm transition-smooth hover:translate-x-1">Contact
                            Us</a>
                        <a href="#"
                            class="block text-gray-400 hover:text-white text-sm transition-smooth hover:translate-x-1">Privacy
                            Policy</a>
                        <a href="#"
                            class="block text-gray-400 hover:text-white text-sm transition-smooth hover:translate-x-1">Terms
                            of Service</a>
                    </div>
                </div>
                <div class="col-span-2 md:col-span-1">
                    <h3 class="text-base font-semibold text-white mb-4 tracking-wide uppercase">Connect</h3>
                    <div class="flex space-x-5">
                        <a href="#" class="text-gray-400 hover:text-primary transition-smooth text-xl hover:scale-110"
                            aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-gray-400 hover:text-pink-500 transition-smooth text-xl hover:scale-110"
                            aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-gray-400 hover:text-blue-400 transition-smooth text-xl hover:scale-110"
                            aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700/50 pt-10 text-center text-sm text-gray-500">
                © 2024 Dostify by Team Dostify. All rights reserved. Built with <i
                    class="fas fa-heart text-red-500 mx-1 animate-pulse" style="animation-duration: 1.5s;"></i> for
                students everywhere.
            </div>
        </div>
    </footer>

    <!-- Chat Widget -->
    <div class="fixed bottom-4 right-4 sm:bottom-6 sm:right-6 z-[1000]" id="chat-widget">
        <button id="chat-toggle"
            class="w-16 h-16 bg-gradient-to-br from-accent via-green-500 to-accent/80 text-white rounded-full shadow-lg hover:shadow-xl transition-smooth transform hover:scale-105 flex items-center justify-center group relative overflow-hidden focus:outline-none animate-pulse-alert"
            aria-label="Open Dostify Chat" aria-expanded="false">
            <i class="fas fa-comments text-2xl transition-transform duration-300 group-hover:scale-110"></i>
            <!-- Add a subtle icon change on open state if desired -->
            <!-- <i class="fas fa-times text-2xl hidden"></i> -->
        </button>

        <div id="chat-interface"
            class="hidden fixed sm:absolute bottom-0 right-0 w-full sm:w-[420px] h-[calc(100dvh)] sm:h-[calc(100vh-110px)] max-h-[700px] bg-gradient-to-b from-gray-50 via-white to-white/80 sm:rounded-2xl shadow-2xl border border-gray-200/60 flex flex-col overflow-hidden transition-all duration-300 ease-out origin-bottom-right backdrop-blur-xl"
            style="bottom: calc(4rem + 1.5rem + 10px); right: 1.5rem; transform: scale(0.95) translateY(10px); opacity: 0;"
            data-state="closed">
            <!-- Chat Header -->
            <div
                class="bg-gradient-to-r from-accent/95 via-green-500 to-accent/80 p-3.5 sm:p-4 flex items-center justify-between shadow-sm flex-shrink-0 h-16 border-b border-white/20 relative z-10 sm:rounded-t-2xl">
                <div class="flex items-center gap-3 min-w-0">
                    <div
                        class="w-9 h-9 sm:w-10 sm:h-10 rounded-full bg-white/30 border-2 border-white/50 flex items-center justify-center shrink-0 p-1 shadow-md overflow-hidden">
                        <img src="./icon-removebg-preview.png" alt="Dostify Logo"
                            class="w-full h-full object-contain scale-110">
                    </div>
                    <div class="min-w-0">
                        <h3 class="text-white font-semibold text-base sm:text-lg truncate drop-shadow-sm">Dostify</h3>
                        <p class="text-white/80 text-xs sm:text-sm truncate">AI Student Companion</p>
                    </div>
                </div>
                <div class="flex gap-0.5 sm:gap-1">
                    <button id="memory-button"
                        class="text-white/80 hover:text-white transition-smooth w-9 h-9 rounded-full hover:bg-white/20 flex items-center justify-center focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50 focus-visible:bg-white/25"
                        title="View & Manage Memory" aria-label="View Memory">
                        <i class="fas fa-brain text-base"></i>
                    </button>
                    <button id="clear-chat"
                        class="text-white/80 hover:text-white transition-smooth w-9 h-9 rounded-full hover:bg-white/20 flex items-center justify-center focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50 focus-visible:bg-white/25"
                        title="Clear Chat History" aria-label="Clear Chat">
                        <i class="fas fa-trash-alt text-base"></i>
                    </button>
                    <button id="close-chat"
                        class="text-white/80 hover:text-white transition-smooth w-9 h-9 rounded-full hover:bg-white/20 flex items-center justify-center focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50 focus-visible:bg-white/25"
                        aria-label="Close Chat">
                        <i class="fas fa-times text-lg"></i>
                    </button>
                </div>
            </div>

            <!-- Chat Messages Area -->
            <div id="chat-messages"
                class="flex-1 overflow-y-auto p-4 space-y-5 bg-gradient-to-b from-white/50 via-gray-50/60 to-white/30">
                <!-- Initial AI Message Example -->
                <div class="ai-message flex items-start gap-2.5 sm:gap-3 max-w-[88%] group">
                    <div
                        class="w-8 h-8 sm:w-9 sm:h-9 rounded-full bg-accent/10 flex items-center justify-center flex-shrink-0 border border-accent/20 mt-1 shadow-sm p-0.5">
                        <img src="./icon-removebg-preview.png" class="w-5 h-5 sm:w-6 sm:h-6">
                    </div>
                    <div
                        class="bg-white rounded-xl rounded-tl-none py-2.5 px-3.5 shadow-chat-bubble border border-gray-100 relative message-bubble">
                        <p class="text-gray-800 leading-relaxed text-sm sm:text-[15px]">Hey there! 👋 I'm Dostify, ready
                            to help with your studies, well-being, or anything else on your mind. How can I assist you
                            today? 😊</p>
                        <button
                            class="copy-btn absolute -top-2 -right-2 p-1 bg-gray-100 hover:bg-gray-200 rounded-full z-10 border border-gray-200 focus:outline-none focus-visible:ring-1 focus-visible:ring-primary/50"
                            title="Copy message" aria-label="Copy message">
                            <i
                                class="far fa-copy text-[10px] text-gray-600 w-4 h-4 flex items-center justify-center"></i>
                        </button>
                    </div>
                </div>
                <!-- User Message Example -->
                <div class="user-message flex justify-end items-start gap-2.5 sm:gap-3 group">
                    <div
                        class="bg-gradient-to-br from-primary to-blue-500 text-white rounded-xl rounded-tr-none py-2.5 px-3.5 shadow-chat-bubble-user max-w-[88%] relative message-bubble">
                        <p class="leading-relaxed text-sm sm:text-[15px]">Hi Dostify, I need help with time management.
                        </p>
                        <button
                            class="copy-btn absolute -top-2 -left-2 p-1 bg-blue-600 hover:bg-blue-700 rounded-full z-10 border border-blue-300/50 focus:outline-none focus-visible:ring-1 focus-visible:ring-white/50"
                            title="Copy message" aria-label="Copy message">
                            <i
                                class="far fa-copy text-[10px] text-white/90 w-4 h-4 flex items-center justify-center"></i>
                        </button>
                    </div>
                    <div
                        class="w-8 h-8 sm:w-9 sm:h-9 rounded-full bg-gray-200 flex items-center justify-center flex-shrink-0 border border-gray-300/50 mt-1 shadow-sm text-gray-500 text-base font-medium">
                        <i class="far fa-user"></i> <!-- Consistent User Icon -->
                    </div>
                </div>
                <!-- Add more example messages if needed -->
            </div>

            <!-- Typing Indicator -->
            <div id="typing-indicator"
                class="hidden px-4 py-2 bg-white/80 border-t border-gray-100/80 backdrop-blur-sm flex-shrink-0">
                <div class="flex items-center gap-2.5 sm:gap-3">
                    <div
                        class="w-8 h-8 sm:w-9 sm:h-9 rounded-full bg-accent/10 flex items-center justify-center flex-shrink-0 border border-accent/20 p-0.5">
                        <img src="./icon-removebg-preview.png" class="w-5 h-5 sm:w-6 sm:h-6 animate-bounce-subtle">
                    </div>
                    <div
                        class="flex items-center gap-1.5 bg-gray-100 rounded-full py-1.5 px-3 shadow-sm border border-gray-200">
                        <div class="w-1.5 h-1.5 rounded-full bg-gray-500 animate-pulse"
                            style="animation-duration: 1.2s; animation-delay: 0.1s;"></div>
                        <div class="w-1.5 h-1.5 rounded-full bg-gray-500 animate-pulse"
                            style="animation-duration: 1.2s; animation-delay: 0.3s;"></div>
                        <div class="w-1.5 h-1.5 rounded-full bg-gray-500 animate-pulse"
                            style="animation-duration: 1.2s; animation-delay: 0.5s;"></div>
                        <span class="typing-text text-gray-700 text-xs sm:text-sm ml-1.5 font-medium">Dostify is
                            typing...</span> <!-- Changed text -->
                    </div>
                </div>
            </div>

            <!-- Chat Input Form -->
            <div
                class="p-3 sm:p-4 bg-white/95 border-t border-gray-200/80 relative flex-shrink-0 backdrop-blur-sm sm:rounded-b-2xl">
                <form id="chat-form" class="flex gap-2 sm:gap-3 items-end">
                    <!-- Voice input button removed for now as it's disabled -->
                    <!--
                  <button type="button" id="voice-input" class="w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-500 hover:text-gray-700 flex items-center justify-center transition-smooth flex-shrink-0 group focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/50 focus-visible:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed" aria-label="Use Voice Input" title="Voice Input (Coming Soon)" disabled>
                     <i class="fas fa-microphone"></i>
                 </button>
                 -->
                    <div id="chat-input-wrapper"
                        class="flex-1 relative group border border-gray-300 hover:border-gray-400 focus-within:border-primary focus-within:ring-2 focus-within:ring-primary/20 rounded-xl transition-all duration-200 bg-white shadow-sm flex items-center pr-2">
                        <textarea id="chat-input" rows="1"
                            class="flex-1 w-full border-none focus:outline-none focus:ring-0 transition-smooth bg-transparent text-sm resize-none overflow-y-auto max-h-32 py-3 pl-4 placeholder-gray-500 custom-scrollbar"
                            placeholder="Type your message..." autocomplete="off"
                            aria-label="Chat input message"></textarea>
                        <button type="button" id="emoji-button"
                            class="text-gray-400 hover:text-primary transition-colors w-9 h-9 flex items-center justify-center rounded-full hover:bg-gray-100 focus:outline-none focus-visible:ring-1 focus-visible:ring-primary/50 focus-visible:bg-gray-100/50 flex-shrink-0 ml-1"
                            aria-label="Select Emoji">
                            <i class="far fa-smile text-lg"></i>
                        </button>
                        <emoji-picker id="emoji-picker" class="hidden"></emoji-picker>
                        <!-- Ensure CSS positions this correctly -->
                    </div>
                    <button type="submit" id="send-button"
                        class="bg-gradient-to-br from-accent to-green-500 hover:brightness-110 text-white rounded-full transition-all duration-300 w-10 h-10 flex items-center justify-center flex-shrink-0 shadow-md hover:shadow-lg group disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-accent/50 disabled:from-gray-400 disabled:to-gray-500 disabled:shadow-none btn-accent transform hover:scale-105 focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-1 focus-visible:ring-accent/70"
                        aria-label="Send Message" disabled>
                        <i
                            class="fas fa-paper-plane text-sm transition-transform duration-300 group-hover:scale-110 group-disabled:scale-100"></i>
                    </button>
                </form>
                <!-- Shift+Enter hint removed for cleaner look, it's standard behavior -->
                <!-- <div class="text-xs text-gray-400 text-center mt-1.5 px-10 hidden sm:block">Press Shift+Enter for new line</div> -->
            </div>
        </div>
    </div>

    <!-- Memory Modal -->
    <div id="memory-modal" class="memory-modal font-poppins">
        <div class="memory-modal-content">
            <button class="memory-close-button" id="memory-modal-close" aria-label="Close Memory Modal">×</button>
            <h2 class="text-2xl font-semibold text-dark mb-4">Dostify's Memory</h2>
            <p class="text-sm text-gray-500 mb-5 leading-relaxed">Dostify remembers key points from our conversation to
                provide better context. This memory is temporary and stored only in your browser for this session.</p>
            <div class="bg-gray-50 p-4 rounded-lg max-h-60 overflow-y-auto border border-gray-200/80">
                <ul id="memory-list" class="space-y-2">
                    <li class="text-gray-500 italic">Memory is currently empty.</li>
                </ul>
            </div>
            <div class="text-center mt-8 border-t border-gray-200 pt-6">
                <button id="clear-memory-button"
                    class="bg-red-500 hover:bg-red-600 text-white font-bold py-2.5 px-6 rounded-lg transition-smooth text-sm focus:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-red-500/50 disabled:opacity-60 disabled:cursor-not-allowed"
                    aria-label="Clear Dostify's Memory">
                    <i class="fas fa-trash-alt mr-1.5"></i> Clear Memory
                </button>
            </div>
        </div>
    </div>

    <!-- Audio Elements -->
    <audio id="message-sent" src="https://assets.mixkit.co/sfx/preview/mixkit-message-pop-alert-2354.mp3"
        preload="auto"></audio>
    <audio id="message-receive" src="https://assets.mixkit.co/sfx/preview/mixkit-software-interface-start-2574.mp3"
        preload="auto"></audio>


    <!-- Main JS Logic -->
    <script>
        // Navbar Scroll Effect
        const navbar = document.getElementById('navbar');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 10) {
                navbar.classList.add('shadow-nav-scroll', 'border-gray-200/60', 'bg-white/95');
                navbar.classList.remove('border-transparent', 'bg-white/90');
            } else {
                navbar.classList.remove('shadow-nav-scroll', 'border-gray-200/60', 'bg-white/95');
                navbar.classList.add('border-transparent', 'bg-white/90');
            }
        });

        // Mobile Menu Toggle
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileMenuIcon = mobileMenuButton.querySelector('i');
        mobileMenuButton.addEventListener('click', () => {
            const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';
            mobileMenuButton.setAttribute('aria-expanded', !isExpanded);
            mobileMenu.classList.toggle('hidden');
            mobileMenuIcon.classList.toggle('fa-bars');
            mobileMenuIcon.classList.toggle('fa-times');
        });
        // Close mobile menu on link click
        mobileMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                mobileMenuButton.setAttribute('aria-expanded', 'false');
                mobileMenu.classList.add('hidden');
                mobileMenuIcon.classList.remove('fa-times');
                mobileMenuIcon.classList.add('fa-bars');
            });
        });

        // Chat Input Auto-Resize & Send Button State
        const chatInput = document.getElementById('chat-input');
        const sendButton = document.getElementById('send-button');
        const MAX_TEXTAREA_HEIGHT = 96; // Corresponds to max-h-24

        function adjustTextareaHeight() {
            chatInput.style.height = 'auto'; // Reset height
            const scrollHeight = chatInput.scrollHeight;
            chatInput.style.height = Math.min(scrollHeight, MAX_TEXTAREA_HEIGHT) + 'px';
            chatInput.style.overflowY = scrollHeight > MAX_TEXTAREA_HEIGHT ? 'auto' : 'hidden';
        }

        chatInput.addEventListener('input', () => {
            sendButton.disabled = chatInput.value.trim() === '';
            adjustTextareaHeight();
        });
        adjustTextareaHeight(); // Initial adjustment

        // Chat Interface Toggle Animation
        const chatToggle = document.getElementById('chat-toggle');
        const chatInterface = document.getElementById('chat-interface');

        chatToggle.addEventListener('click', () => {
            const state = chatInterface.getAttribute('data-state');
            if (state === 'closed') {
                chatInterface.classList.remove('hidden');
                requestAnimationFrame(() => {
                    chatInterface.style.transform = 'scale(1) translateY(0)';
                    chatInterface.style.opacity = '1';
                });
                chatInterface.setAttribute('data-state', 'open');
                chatToggle.setAttribute('aria-expanded', 'true');
                // Optional: Change toggle button icon
                // chatToggle.querySelector('.fa-comments').classList.add('hidden');
                // chatToggle.querySelector('.fa-times').classList.remove('hidden');
            } else {
                chatInterface.style.transform = 'scale(0.95) translateY(10px)';
                chatInterface.style.opacity = '0';
                // Listen for transition end to add 'hidden' back
                chatInterface.addEventListener('transitionend', () => {
                    if (chatInterface.getAttribute('data-state') === 'closed') { // Check state again in case of rapid clicks
                        chatInterface.classList.add('hidden');
                    }
                }, { once: true });

                chatInterface.setAttribute('data-state', 'closed');
                chatToggle.setAttribute('aria-expanded', 'false');
                // Optional: Change toggle button icon back
                // chatToggle.querySelector('.fa-comments').classList.remove('hidden');
                // chatToggle.querySelector('.fa-times').classList.add('hidden');
            }
        });

        // Close Chat Button
        document.getElementById('close-chat')?.addEventListener('click', () => {
            if (chatInterface.getAttribute('data-state') === 'open') {
                chatToggle.click(); // Simulate clicking the toggle to close with animation
            }
        });


        // Clear Memory Confirmation
        const clearMemoryBtn = document.getElementById('clear-memory-button');
        clearMemoryBtn?.addEventListener('click', (event) => {
            if (!confirm("Are you sure you want to clear Dostify's memory? This action cannot be undone and only affects this browser session.")) {
                event.preventDefault();
                return false;
            }
            // Actual clearing logic should be in chat.js or main.js
        });

        // Sample Prompt Card Click Handler
        document.querySelectorAll('[data-prompt-target]').forEach(card => {
            card.addEventListener('click', (event) => {
                // Prevent triggering if a button or link inside the card was clicked
                if (event.target.closest('button, a')) {
                    return;
                }

                const promptText = card.dataset.prompt;
                if (promptText) {
                    const chatInputEl = document.getElementById('chat-input');
                    const chatInterfaceEl = document.getElementById('chat-interface');
                    const chatToggleBtn = document.getElementById('chat-toggle');

                    // Open chat if closed
                    if (chatInterfaceEl.getAttribute('data-state') === 'closed') {
                        chatToggleBtn.click();
                    }

                    // Wait briefly for chat to potentially open before setting value
                    setTimeout(() => {
                        chatInputEl.value = promptText;
                        chatInputEl.dispatchEvent(new Event('input', { bubbles: true })); // Trigger input event for button state and resize
                        chatInputEl.focus();
                        // Optionally send the message automatically:
                        // document.getElementById('chat-form').requestSubmit();
                    }, chatInterfaceEl.getAttribute('data-state') === 'closed' ? 350 : 50); // Longer delay if opening
                }
            });
        });


        // Copy Message Functionality
        document.addEventListener('click', function (event) {
            const button = event.target.closest('.copy-btn');
            if (button) {
                const messageBubble = button.closest('.message-bubble');
                const messageText = messageBubble?.querySelector('p')?.innerText;

                if (messageText) {
                    navigator.clipboard.writeText(messageText)
                        .then(() => {
                            const icon = button.querySelector('i');
                            const originalIconClass = 'fa-copy';
                            const successIconClass = 'fa-check';
                            const originalTitle = button.getAttribute('aria-label') || "Copy message";

                            icon.classList.remove(originalIconClass);
                            icon.classList.add(successIconClass);
                            button.setAttribute('aria-label', 'Copied!');
                            button.classList.add('text-green-500'); // Visual feedback

                            setTimeout(() => {
                                icon.classList.remove(successIconClass);
                                icon.classList.add(originalIconClass);
                                button.setAttribute('aria-label', originalTitle);
                                button.classList.remove('text-green-500');
                            }, 1500);
                        })
                        .catch(err => {
                            console.error('Failed to copy text: ', err);
                            // Optionally show an error state to the user
                        });
                }
            }
        });

        // Submit Chat on Enter (without Shift)
        chatInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                if (!sendButton.disabled) {
                    document.getElementById('chat-form').requestSubmit();
                }
            }
        });



    </script>


</body>

</html>